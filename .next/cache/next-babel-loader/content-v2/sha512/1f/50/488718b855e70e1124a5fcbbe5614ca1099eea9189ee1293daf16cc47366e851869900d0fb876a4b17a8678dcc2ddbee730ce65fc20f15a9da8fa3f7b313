{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Learning\\\\HKI_NamTu\\\\MoHinhHoaPhanMem\\\\KTXSHOP\\\\Source\\\\FE-KTXSHOP-SELLER\\\\pages\\\\login\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { parseBody } from \"next/dist/next-server/server/api-utils\";\nimport { APIStatus } from \"../../lib/common\";\nimport Head from \"next/head\";\nimport { Box, Button, Paper, TextField } from \"@material-ui/core\";\nimport styles from \"./login.module.css\";\nimport { accountApi } from \"../../services/accountApi\";\n/*\r\nLogin page that is used on stg/uat/prd is only run from internal-hrm code repo.\r\n'Login.js' file of other repos is only used for local testing.\r\n\r\nThis file have 2 ways to use:\r\n+ GET method: display login page with login form\r\n+ POST method: receive submitted login data (username/password)\r\n*/\n\nexport async function getServerSideProps(ctx) {\n  let returnObject = {\n    props: {}\n  };\n\n  if (ctx.req && ctx.req.method === \"POST\") {\n    // read form data\n    let body = await parseBody(ctx.req, \"1kb\"); // Get account\n\n    const listAccount = await accountApi.getAccount({});\n    console.log(); // call backend API\n    // if OK, do set cookie & redirect page to relative target\n    // let data = result.data[0];\n\n    let url = body.url || \"/cms/product\";\n    let res = ctx.res;\n    res.setHeader(\"location\", url);\n    res.statusCode = 302;\n    res.end();\n    returnObject.props.url = body.url;\n  } else {\n    returnObject.props.url = ctx.query.url || \"/login\";\n  }\n\n  return returnObject;\n}\n/*\r\nA simple login page.\r\nCan customize to display more.\r\nLoginForm has basic inputs of authentication flow:\r\n+ Login label\r\n+ Username / password input\r\n+ Submit button\r\n*/\n\nexport default function LoginPage(props) {\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp v\\xE0o h\\u1EC7 th\\u1ED1ng n\\u1ED9i b\\u1ED9\")), __jsx(Paper, {\n    className: styles.loginForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp\"), __jsx(\"form\", {\n    method: \"POST\",\n    action: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"url\",\n    value: props.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, __jsx(TextField, {\n    id: \"username\",\n    label: \"T\\xEAn t\\xE0i kho\\u1EA3n\",\n    margin: \"normal\",\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      margin: 12,\n      width: 280\n    },\n    autoFocus: true,\n    name: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })), __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, __jsx(TextField, {\n    id: \"password\",\n    label: \"M\\u1EADt kh\\u1EA9u\",\n    margin: \"normal\",\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      margin: 12,\n      width: 280\n    },\n    name: \"password\",\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  })), __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      margin: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp\")))));\n}","map":{"version":3,"sources":["D:/Learning/Learning/HKI_NamTu/MoHinhHoaPhanMem/KTXSHOP/Source/FE-KTXSHOP-SELLER/pages/login/index.js"],"names":["parseBody","APIStatus","Head","Box","Button","Paper","TextField","styles","accountApi","getServerSideProps","ctx","returnObject","props","req","method","body","listAccount","getAccount","console","log","url","res","setHeader","statusCode","end","query","LoginPage","loginForm","shrink","margin","width"],"mappings":"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","sourcesContent":["import { parseBody } from \"next/dist/next-server/server/api-utils\";\r\nimport { APIStatus } from \"../../lib/common\";\r\nimport Head from \"next/head\";\r\nimport { Box, Button, Paper, TextField } from \"@material-ui/core\";\r\nimport styles from \"./login.module.css\";\r\nimport { accountApi } from \"../../services/accountApi\";\r\n\r\n/*\r\nLogin page that is used on stg/uat/prd is only run from internal-hrm code repo.\r\n'Login.js' file of other repos is only used for local testing.\r\n\r\nThis file have 2 ways to use:\r\n+ GET method: display login page with login form\r\n+ POST method: receive submitted login data (username/password)\r\n*/\r\nexport async function getServerSideProps(ctx) {\r\n  let returnObject = { props: {} };\r\n\r\n  if (ctx.req && ctx.req.method === \"POST\") {\r\n    // read form data\r\n    let body = await parseBody(ctx.req, \"1kb\");\r\n\r\n    // Get account\r\n    const listAccount = await accountApi.getAccount({});\r\n    console.log()\r\n\r\n    // call backend API\r\n\r\n    // if OK, do set cookie & redirect page to relative target\r\n\r\n    // let data = result.data[0];\r\n    let url = body.url || \"/cms/product\";\r\n    let res = ctx.res;\r\n    res.setHeader(\"location\", url);\r\n    res.statusCode = 302;\r\n    res.end();\r\n\r\n    returnObject.props.url = body.url;\r\n  } else {\r\n    returnObject.props.url = ctx.query.url || \"/login\";\r\n  }\r\n\r\n  return returnObject;\r\n}\r\n\r\n/*\r\nA simple login page.\r\nCan customize to display more.\r\nLoginForm has basic inputs of authentication flow:\r\n+ Login label\r\n+ Username / password input\r\n+ Submit button\r\n*/\r\nexport default function LoginPage(props) {\r\n  return (\r\n    <div>\r\n      <Head>\r\n        <title>Đăng nhập vào hệ thống nội bộ</title>\r\n      </Head>\r\n      <Paper className={styles.loginForm}>\r\n        <h1>Đăng nhập</h1>\r\n        <form method=\"POST\" action=\"/login\">\r\n          <input type=\"hidden\" name=\"url\" value={props.url} />\r\n          <Box>\r\n            <TextField\r\n              id=\"username\"\r\n              label=\"Tên tài khoản\"\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              style={{ margin: 12, width: 280 }}\r\n              autoFocus={true}\r\n              name=\"username\"\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <TextField\r\n              id=\"password\"\r\n              label=\"Mật khẩu\"\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              style={{ margin: 12, width: 280 }}\r\n              name=\"password\"\r\n              type=\"password\"\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ margin: 8 }}\r\n            >\r\n              Đăng nhập\r\n            </Button>\r\n          </Box>\r\n        </form>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}