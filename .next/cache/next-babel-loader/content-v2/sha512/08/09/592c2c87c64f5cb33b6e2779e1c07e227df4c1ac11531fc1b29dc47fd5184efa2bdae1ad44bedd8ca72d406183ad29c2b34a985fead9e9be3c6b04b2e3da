{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Learning\\\\HKI_NamTu\\\\MoHinhHoaPhanMem\\\\KTXSHOP\\\\Source\\\\FE-KTXSHOP-SELLER\\\\pages\\\\login\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { parseBody } from \"next/dist/next-server/server/api-utils\";\nimport { APIStatus } from \"../../lib/common\";\nimport Head from \"next/head\";\nimport { Box, Button, Paper, TextField } from \"@material-ui/core\";\nimport styles from \"./login.module.css\";\nimport { accountApi } from \"../../services/accountApi\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\n/*\r\nLogin page that is used on stg/uat/prd is only run from internal-hrm code repo.\r\n'Login.js' file of other repos is only used for local testing.\r\n\r\nThis file have 2 ways to use:\r\n+ GET method: display login page with login form\r\n+ POST method: receive submitted login data (username/password)\r\n*/\n\nexport async function getServerSideProps(ctx) {\n  let returnObject = {\n    props: {}\n  };\n\n  if (ctx.req && ctx.req.method === \"POST\") {\n    // read form data\n    let body = await parseBody(ctx.req, \"1kb\"); // Get account\n\n    const listAccount = (await accountApi.getAccount({})).data.data;\n    let isLogin = false;\n    let account = {};\n    listAccount.map(item => {\n      if (item.attributes.Email === body.email && item.attributes.Password === body.password && item.attributes.Authorization === 1) {\n        isLogin = true;\n        account = item;\n      }\n    });\n\n    if (isLogin) {\n      returnObject.props.loggedInUserInfo = account;\n    }\n\n    returnObject.props.url = body.url;\n  } else {\n    returnObject.props.url = ctx.query.url || \"/cms/product\";\n  }\n\n  return returnObject;\n}\n/*\r\nA simple login page.\r\nCan customize to display more.\r\nLoginForm has basic inputs of authentication flow:\r\n+ Login label\r\n+ Username / password input\r\n+ Submit button\r\n*/\n\nexport default function LoginPage(props) {\n  const router = useRouter();\n  useEffect(() => {\n    if (props.loggedInUserInfo) {\n      localStorage.setItem('');\n      router.push(\"/cms/product\");\n    }\n  }, [props.loggedInUserInfo]);\n\n  if (!props.loggedInUserInfo) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp v\\xE0o h\\u1EC7 th\\u1ED1ng n\\u1ED9i b\\u1ED9\")), __jsx(Paper, {\n      className: styles.loginForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp\"), __jsx(\"form\", {\n      method: \"POST\",\n      action: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, __jsx(\"input\", {\n      type: \"hidden\",\n      name: \"url\",\n      value: props.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }), __jsx(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, __jsx(TextField, {\n      id: \"email\",\n      label: \"T\\xEAn t\\xE0i kho\\u1EA3n\",\n      margin: \"normal\",\n      InputLabelProps: {\n        shrink: true\n      },\n      style: {\n        margin: 12,\n        width: 280\n      },\n      autoFocus: true,\n      name: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    })), __jsx(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, __jsx(TextField, {\n      id: \"password\",\n      label: \"M\\u1EADt kh\\u1EA9u\",\n      margin: \"normal\",\n      InputLabelProps: {\n        shrink: true\n      },\n      style: {\n        margin: 12,\n        width: 280\n      },\n      name: \"password\",\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    })), __jsx(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      style: {\n        margin: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp\")))));\n  } else {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 12\n      }\n    });\n  }\n}","map":{"version":3,"sources":["D:/Learning/Learning/HKI_NamTu/MoHinhHoaPhanMem/KTXSHOP/Source/FE-KTXSHOP-SELLER/pages/login/index.js"],"names":["parseBody","APIStatus","Head","Box","Button","Paper","TextField","styles","accountApi","useRouter","useEffect","getServerSideProps","ctx","returnObject","props","req","method","body","listAccount","getAccount","data","isLogin","account","map","item","attributes","Email","email","Password","password","Authorization","loggedInUserInfo","url","query","LoginPage","router","localStorage","setItem","push","loginForm","shrink","margin","width"],"mappings":"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","sourcesContent":["import { parseBody } from \"next/dist/next-server/server/api-utils\";\r\nimport { APIStatus } from \"../../lib/common\";\r\nimport Head from \"next/head\";\r\nimport { Box, Button, Paper, TextField } from \"@material-ui/core\";\r\nimport styles from \"./login.module.css\";\r\nimport { accountApi } from \"../../services/accountApi\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect } from \"react\";\r\n\r\n/*\r\nLogin page that is used on stg/uat/prd is only run from internal-hrm code repo.\r\n'Login.js' file of other repos is only used for local testing.\r\n\r\nThis file have 2 ways to use:\r\n+ GET method: display login page with login form\r\n+ POST method: receive submitted login data (username/password)\r\n*/\r\nexport async function getServerSideProps(ctx) {\r\n  let returnObject = { props: {} };\r\n\r\n  if (ctx.req && ctx.req.method === \"POST\") {\r\n    // read form data\r\n    let body = await parseBody(ctx.req, \"1kb\");\r\n\r\n    // Get account\r\n    const listAccount = (await accountApi.getAccount({})).data.data;\r\n    let isLogin = false;\r\n    let account = {};\r\n\r\n    listAccount.map((item) => {\r\n      if (\r\n        item.attributes.Email === body.email &&\r\n        item.attributes.Password === body.password &&\r\n        item.attributes.Authorization === 1\r\n      ) {\r\n        isLogin = true;\r\n        account = item;\r\n      }\r\n    });\r\n\r\n    if (isLogin) {\r\n      returnObject.props.loggedInUserInfo = account;\r\n    }\r\n\r\n    returnObject.props.url = body.url;\r\n  } else {\r\n    returnObject.props.url = ctx.query.url || \"/cms/product\";\r\n  }\r\n\r\n  return returnObject;\r\n}\r\n\r\n/*\r\nA simple login page.\r\nCan customize to display more.\r\nLoginForm has basic inputs of authentication flow:\r\n+ Login label\r\n+ Username / password input\r\n+ Submit button\r\n*/\r\nexport default function LoginPage(props) {\r\n  const router = useRouter();\r\n  useEffect(() => {\r\n    if (props.loggedInUserInfo) {\r\n      localStorage.setItem('')\r\n      router.push(\"/cms/product\");\r\n    }\r\n  }, [props.loggedInUserInfo]);\r\n\r\n  if (!props.loggedInUserInfo) {\r\n    return (\r\n      <div>\r\n        <Head>\r\n          <title>Đăng nhập vào hệ thống nội bộ</title>\r\n        </Head>\r\n        <Paper className={styles.loginForm}>\r\n          <h1>Đăng nhập</h1>\r\n          <form method=\"POST\" action=\"/login\">\r\n            <input type=\"hidden\" name=\"url\" value={props.url} />\r\n            <Box>\r\n              <TextField\r\n                id=\"email\"\r\n                label=\"Tên tài khoản\"\r\n                margin=\"normal\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                style={{ margin: 12, width: 280 }}\r\n                autoFocus={true}\r\n                name=\"email\"\r\n              />\r\n            </Box>\r\n            <Box>\r\n              <TextField\r\n                id=\"password\"\r\n                label=\"Mật khẩu\"\r\n                margin=\"normal\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                style={{ margin: 12, width: 280 }}\r\n                name=\"password\"\r\n                type=\"password\"\r\n              />\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                style={{ margin: 8 }}\r\n              >\r\n                Đăng nhập\r\n              </Button>\r\n            </Box>\r\n          </form>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  } else {\r\n    return <div></div>;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}