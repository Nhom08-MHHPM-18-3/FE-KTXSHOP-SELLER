{"ast":null,"code":"import _regeneratorRuntime from \"/home/hao/Deadline/mhhpm_18_3_final/FE-KTXSHOP-SELLER/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/hao/Deadline/mhhpm_18_3_final/FE-KTXSHOP-SELLER/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/hao/Deadline/mhhpm_18_3_final/FE-KTXSHOP-SELLER/pages/cms/product/new.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Box, Button, CircularProgress, Grid, Tab, Tabs, MenuItem, FormControl, InputLabel, Select, TextField } from \"@material-ui/core\";\nimport Image from 'next/image';\nimport LabelBox from \"../../../component/editor/label-box/index\";\nimport RichTextField from \"../../../component/editor/rich-text-field/index\";\nimport { renderWithLoggedInUser } from \"../../../lib/login\";\nimport stylesGlobal from \"../../../component/css-global.module.css\";\nimport ImageUploadField from \"../../../component/image-upload-field\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport React, { useEffect, useState } from \"react\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { useForm } from \"react-hook-form\";\nimport { MyCard, MyCardActions, MyCardContent, MyCardHeader } from \"../../../component/my-card/my-card\";\nimport { useRouter } from \"next/router\";\nexport var __N_SSP = true;\nexport function loadProductData(_x, _x2) {\n  return _loadProductData.apply(this, arguments);\n}\n\nfunction _loadProductData() {\n  _loadProductData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ctx, createNew) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", {\n              props: {\n                data: {}\n              }\n            });\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadProductData.apply(this, arguments);\n}\n\nexport default function EditPage(props) {\n  return renderWithLoggedInUser(props, render);\n}\n_c = EditPage;\n\nfunction render(props) {\n  _s();\n\n  var _props$product;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var product = props === null || props === void 0 ? void 0 : (_props$product = props.product) === null || _props$product === void 0 ? void 0 : _props$product.data[0];\n\n  var _useState2 = useState(),\n      price = _useState2[0],\n      setPrice = _useState2[1];\n\n  var _useState3 = useState(),\n      name = _useState3[0],\n      setName = _useState3[1];\n\n  var _useState4 = useState(),\n      imgUrl = _useState4[0],\n      setImgUrl = _useState4[1];\n\n  var _useState5 = useState(\"a\"),\n      age = _useState5[0],\n      setAge = _useState5[1];\n\n  var router = useRouter();\n\n  function createProduct() {\n    return _createProduct.apply(this, arguments);\n  }\n\n  function _createProduct() {\n    _createProduct = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var myHeaders;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              myHeaders = new Headers();\n              myHeaders.append(\"Content-Type\", \"application/json\");\n              _context.next = 4;\n              return fetch(process.env.API_HOST + '/api/products', {\n                method: 'POST',\n                body: JSON.stringify({\n                  data: {\n                    name: name,\n                    price: price,\n                    imageUrl: imgUrl\n                  }\n                }),\n                headers: myHeaders\n              }).then(function (response) {\n                return response.json();\n              }).then(function (result) {\n                router.push(\"/cms/product\");\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _createProduct.apply(this, arguments);\n  }\n\n  var handleChange = function handleChange() {};\n\n  function uploadImage(_x3) {\n    return _uploadImage.apply(this, arguments);\n  } // func onSubmit used because useForm not working with some fields\n\n\n  function _uploadImage() {\n    _uploadImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              formData = new FormData();\n              formData.append(\"files\", value);\n              _context2.next = 4;\n              return fetch(process.env.API_HOST + '/api/upload', {\n                method: 'POST',\n                body: formData\n              }).then(function (response) {\n                return response.json();\n              }).then(function (result) {\n                setImgUrl(process.env.API_HOST + result[0].url);\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _uploadImage.apply(this, arguments);\n  }\n\n  function onSubmit(_x4) {\n    return _onSubmit.apply(this, arguments);\n  }\n\n  function _onSubmit() {\n    _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return updateProduct(formData);\n\n            case 3:\n              _context3.next = 9;\n              break;\n\n            case 5:\n              _context3.prev = 5;\n              _context3.t0 = _context3[\"catch\"](0);\n              setLoading(false);\n              error(_context3.t0.message || _context3.t0.toString());\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 5]]);\n    }));\n    return _onSubmit.apply(this, arguments);\n  }\n\n  return __jsx(\"div\", {\n    select: \"/cms/product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, \"Th\\xF4ng tin s\\u1EA3n ph\\u1EA9m\")), __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, __jsx(MyCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, __jsx(MyCardHeader, {\n    title: \"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\",\n    small: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }), __jsx(MyCardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    id: \"name\",\n    name: \"name\",\n    variant: \"outlined\",\n    size: \"small\",\n    label: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\",\n    placeholder: \"S\\u1EA3n ph\\u1EA9m A\",\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      width: \"100%\"\n    },\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    style: {},\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    id: \"description\",\n    name: \"description\",\n    variant: \"outlined\",\n    size: \"small\",\n    label: \"M\\xF4 t\\u1EA3 s\\u1EA3n ph\\u1EA9m\",\n    placeholder: \"S\\u1EA3n ph\\u1EA9m n\\xE0y t\\u1ED1t\",\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      width: \"100%\"\n    },\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, __jsx(TextField, {\n    id: \"price\",\n    name: \"price\",\n    variant: \"outlined\",\n    size: \"small\",\n    label: \"Gi\\xE1 ti\\u1EC1n\",\n    placeholder: \"100000\",\n    InputLabelProps: {\n      shrink: true\n    },\n    style: {\n      width: \"100%\"\n    },\n    onChange: function onChange(e) {\n      return setPrice(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 33\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, __jsx(FormControl, {\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, __jsx(InputLabel, {\n    id: \"demo-simple-select-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 37\n    }\n  }, \"Lo\\u1EA1i\"), __jsx(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    value: \"Ăn uống\",\n    label: \"Lo\\u1EA1i\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 37\n    }\n  }, __jsx(MenuItem, {\n    value: \"Ăn uống\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, \"\\u0102n u\\u1ED1ng\"), __jsx(MenuItem, {\n    value: \"Đồ dùng\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, \"\\u0110\\u1ED3 d\\xF9ng\")))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    id: \"actual-btn\",\n    onChange: function onChange(e) {\n      return uploadImage(e.target.files[0]);\n    },\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }), __jsx(\"label\", {\n    style: {\n      backgroundColor: \"indigo\",\n      color: \"white\",\n      padding: \"0.5rem\",\n      borderRadius: \"0.3rem\",\n      cursor: \"pointer\"\n    },\n    \"for\": \"actual-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 33\n    }\n  }, \"Ch\\u1ECDn \\u1EA3nh\")), imgUrl ? __jsx(Grid, {\n    style: {\n      padding: \"0\",\n      marginLeft: \"25px\"\n    },\n    item: true,\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 39\n    }\n  }, __jsx(Image, {\n    src: imgUrl,\n    height: 100,\n    width: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 33\n    }\n  })) : null))), __jsx(MyCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, __jsx(MyCardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }, __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 29\n    }\n  }, __jsx(Link, {\n    href: \"/cms/product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 33\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 37\n    }\n  }, \"Tr\\u1EDF v\\u1EC1\"))), __jsx(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 29\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return createProduct();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 33\n    }\n  }, loading && __jsx(CircularProgress, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 49\n    }\n  }), \"T\\u1EA1o m\\u1EDBi s\\u1EA3n ph\\u1EA9m\")))))));\n}\n\n_s(render, \"aU9XOKZ0Y3UsrVbNRTd0zadQqzY=\", false, function () {\n  return [useRouter];\n});\n\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPage\");","map":{"version":3,"sources":["/home/hao/Deadline/mhhpm_18_3_final/FE-KTXSHOP-SELLER/pages/cms/product/new.js"],"names":["Box","Button","CircularProgress","Grid","Tab","Tabs","MenuItem","FormControl","InputLabel","Select","TextField","Image","LabelBox","RichTextField","renderWithLoggedInUser","stylesGlobal","ImageUploadField","Head","Link","React","useEffect","useState","useForm","MyCard","MyCardActions","MyCardContent","MyCardHeader","useRouter","loadProductData","ctx","createNew","props","data","EditPage","render","loading","setLoading","product","price","setPrice","name","setName","imgUrl","setImgUrl","age","setAge","router","createProduct","myHeaders","Headers","append","fetch","process","env","API_HOST","method","body","JSON","stringify","imageUrl","headers","then","response","json","result","push","handleChange","uploadImage","value","formData","FormData","url","onSubmit","updateProduct","error","message","toString","shrink","width","e","target","files","backgroundColor","color","padding","borderRadius","cursor","marginLeft"],"mappings":"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","sourcesContent":["import {\n    Box,\n    Button,\n    CircularProgress,\n    Grid,\n    Tab,\n    Tabs,\n    MenuItem,\n    FormControl,\n    InputLabel,\n    Select,\n    TextField,\n} from \"@material-ui/core\";\nimport Image from 'next/image'\nimport LabelBox from \"../../../component/editor/label-box/index\";\nimport RichTextField from \"../../../component/editor/rich-text-field/index\";\nimport { doWithLoggedInUser, renderWithLoggedInUser } from \"../../../lib/login\";\nimport stylesGlobal from \"../../../component/css-global.module.css\";\nimport ImageUploadField from \"../../../component/image-upload-field\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport React, { useEffect, useState } from \"react\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { useForm } from \"react-hook-form\";\nimport { MyCard, MyCardActions, MyCardContent, MyCardHeader } from \"../../../component/my-card/my-card\";\nimport { useRouter } from \"next/router\";\n\nexport async function loadProductData(ctx, createNew) {\n    return {\n        props: {\n            data: {}\n        },\n    };\n}\n\nexport async function getServerSideProps(ctx) {\n    return await doWithLoggedInUser(ctx, (ctx) => {\n        return loadProductData(ctx);\n    });\n}\n\nexport default function EditPage(props) {\n    return renderWithLoggedInUser(props, render);\n}\n\nfunction render(props) {\n\n    const [loading, setLoading] = useState(false);\n    const product = props?.product?.data[0];\n\n    const [price, setPrice] = useState();\n    const [name, setName] = useState();\n    const [imgUrl, setImgUrl] = useState();\n    const [age, setAge] = useState(\"a\")\n    const router = useRouter()\n\n    async function createProduct() {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\")\n        await fetch(process.env.API_HOST + '/api/products', {\n            method: 'POST',\n            body: JSON.stringify({\n                data: {\n                    name: name,\n                    price: price,\n                    imageUrl: imgUrl\n                }\n            }),\n            headers: myHeaders\n        })\n            .then(response => response.json())\n            .then(result => {\n                router.push(\"/cms/product\")\n            })\n    }\n\n    const handleChange = () => { }\n\n    async function uploadImage(value) {\n        var formData = new FormData();\n        formData.append(\"files\", value)\n        await fetch(process.env.API_HOST + '/api/upload', {\n            method: 'POST',\n            body: formData\n        })\n            .then(response => response.json())\n            .then(result => {\n                setImgUrl(process.env.API_HOST + result[0].url)\n            })\n    }\n\n    // func onSubmit used because useForm not working with some fields\n    async function onSubmit(formData) {\n        try {\n            await updateProduct(formData);\n        } catch (err) {\n            setLoading(false);\n            error(err.message || err.toString());\n        }\n    }\n\n    return (\n        <div select=\"/cms/product\">\n            <Head>\n                <title>Thông tin sản phẩm</title>\n            </Head>\n            <form >\n                <MyCard>\n                    <MyCardHeader title=\"Thông tin cơ bản\" small={true} />\n                    <MyCardContent>\n\n                        <Grid container spacing={6}>\n                            <Grid item xs={12} sm={12} md={6}>\n                                <TextField\n                                    id=\"name\"\n                                    name=\"name\"\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    label=\"Tên sản phẩm\"\n                                    placeholder=\"Sản phẩm A\"\n                                    InputLabelProps={{\n                                        shrink: true,\n                                    }}\n                                    style={{ width: \"100%\" }}\n                                    onChange={(e) => setName(e.target.value)}\n                                />\n                            </Grid>\n                            <Grid style={{}} item xs={12} sm={12} md={12} />\n                            <Grid item xs={12} sm={12} md={6}>\n                                <TextField\n                                    id=\"description\"\n                                    name=\"description\"\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    label=\"Mô tả sản phẩm\"\n                                    placeholder=\"Sản phẩm này tốt\"\n                                    InputLabelProps={{\n                                        shrink: true,\n                                    }}\n                                    style={{ width: \"100%\" }}\n                                    onChange={(e) => setName(e.target.value)}\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={12} md={3}>\n                                <TextField\n                                    id=\"price\"\n                                    name=\"price\"\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    label=\"Giá tiền\"\n                                    placeholder=\"100000\"\n                                    InputLabelProps={{\n                                        shrink: true,\n                                    }}\n                                    style={{ width: \"100%\" }}\n                                    onChange={(e) => setPrice(e.target.value)}\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={12} md={3}>\n                                <FormControl fullWidth>\n                                    <InputLabel id=\"demo-simple-select-label\">Loại</InputLabel>\n                                    <Select\n                                        labelId=\"demo-simple-select-label\"\n                                        id=\"demo-simple-select\"\n                                        value={\"Ăn uống\"}\n                                        label=\"Loại\"\n                                        onChange={handleChange}\n                                    >\n                                        <MenuItem value={\"Ăn uống\"}>Ăn uống</MenuItem>\n                                        <MenuItem value={\"Đồ dùng\"}>Đồ dùng</MenuItem>\n                                    </Select>\n                                </FormControl>\n                            </Grid>\n                            <Grid item xs={12} sm={12} md={12}>\n                                <input type=\"file\" id=\"actual-btn\" onChange={(e) => uploadImage(e.target.files[0])} hidden />\n                                <label style={{\n                                    backgroundColor: \"indigo\",\n                                    color: \"white\",\n                                    padding: \"0.5rem\",\n                                    borderRadius: \"0.3rem\",\n                                    cursor: \"pointer\"\n                                }} for=\"actual-btn\">Chọn ảnh</label>\n                            </Grid>\n                            {imgUrl ? <Grid style={{ padding: \"0\", marginLeft: \"25px\" }} item xs={12} sm={12} md={12}>\n                                <Image src={imgUrl} height={100} width={100} />\n                            </Grid> : null}\n                        </Grid>\n                    </MyCardContent>\n                </MyCard>\n                <MyCard>\n                    <MyCardActions>\n                        <Grid container spacing={1} xs={12}>\n                            <Grid item>\n                                <Link href=\"/cms/product\">\n                                    <Button variant=\"contained\">\n                                        Trở về\n                                    </Button>\n                                </Link>\n                            </Grid>\n                            <Grid item>\n                                <Button\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    onClick={() => createProduct()}\n                                >\n                                    {loading && <CircularProgress size={20} />}\n                                    Tạo mới sản phẩm\n                                </Button>\n                            </Grid>\n                        </Grid>\n                    </MyCardActions>\n                </MyCard>\n            </form>\n        </div>\n    )\n};\n\n"]},"metadata":{},"sourceType":"module"}